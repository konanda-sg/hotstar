<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jio Cinema</title>
<link rel="icon" href="https://www.jiocinema.com/images/favicon.ico" />
<style>
  :root {
       --bg-dark: #121212;
    --bg-medium: #1E1E1E;
    --text-primary: #FFFFFF;
    --text-secondary: #B0B0B0;
    --accent-color: #0088cc;
    --transition-speed: 0.3s;
    --telegram-primary: #0088cc;
    --telegram-hover: #0370a7;
  }
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    line-height: 1.6;
  }
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
  }
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    flex-wrap: wrap;
    gap: 15px;
    position: relative;
  }
  .header-left {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .back-button {
    color: var(--text-primary);
    text-decoration: none;
    font-size: 1.5rem;
    padding: 8px;
    border-radius: 50%;
    transition: transform 0.2s ease;
    display: flex;
    align-items: center;
    background-color: var(--bg-medium);
    flex-shrink: 0;
  }
  .back-button:hover {
    transform: translateX(-5px);
  }
  .back-arrow {
    width: 24px;
    height: 24px;
    fill: currentColor;
  }
  .header h1 {
    color: var(--text-primary);
    font-size: 2rem;
    font-weight: 700;
  }
  .header-controls {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .category-select, .search-input {
    background-color: var(--bg-medium);
    color: var(--text-primary);
    border: none;
    padding: 10px;
    border-radius: 5px;
    appearance: none;
  }
  .category-select {
    width: 180px;
  }
  .search-input {
    width: 180px;
  }
  .telegram-btn {
    background-color: var(--telegram-primary);
    color: white;
    padding: 10px 115px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    white-space: nowrap;
    min-width: 140px;
    flex-shrink: 0;
  }
  .telegram-btn:hover {
    background-color: var(--telegram-hover);
  }
  .telegram-icon {
    width: 20px;
    height: 20px;
    fill: currentColor;
    flex-shrink: 0;
  }
  .channels-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    padding: 10px;
    margin-top: 30px;
  }
  .channel-card {
    background-color: var(--bg-medium);
    border-radius: 12px;
    overflow: hidden;
    transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    cursor: pointer;
    position: relative;
  }
  .channel-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
  }
  .channel-image-container {
    position: relative;
    width: 100%;
    height: 140px;
    background-color: #2a2a2a;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
  }
  .channel-image-container img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }
  .channel-details {
    padding: 15px;
  }
  .channel-details h3 {
    font-size: 1rem;
    margin-bottom: 5px;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .channel-meta {
    font-size: 0.8rem;
    color: var(--text-secondary);
    display: flex;
    gap: 8px;
  }
  .channel-meta span {
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }
  .no-results {
    grid-column: 1/-1;
    text-align: center;
    padding: 40px;
    color: var(--text-secondary);
    background-color: var(--bg-medium);
    border-radius: 8px;
    font-size: 1.1rem;
  }
  @media (max-width: 768px) {
    .header {
      flex-direction: column;
      align-items: stretch;
    }

    .header-controls {
      flex-direction: column;
    }
    .channels-grid {
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    }
    .channel-image-container {
      height: 100px;
    }
    .channel-details h3 {
      font-size: 0.8rem;
    }
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="header-left">
      <a href="../" class="back-button" aria-label="Back to home">
        <svg class="back-arrow" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </a>
      <h1>BIGG BOSS</h1>
    </div>
    <div class="header-controls">
      <form id="filter-form" onsubmit="event.preventDefault(); applyFilters();">
        <select name="category" id="category-dropdown" class="category-select" aria-label="Select category">
          <option value="all" selected>All Categories</option>
          <!-- options will be populated dynamically -->
        </select>
        <input
          type="text"
          name="search"
          id="search-input"
          class="search-input"
          placeholder="Search channels..."
          aria-label="Search channels"
          oninput="debouncedFilter()"
        />
      </form>
      <a href="https://t.me/vaathala1" class="telegram-btn" target="_blank" rel="noopener noreferrer">
        <svg class="telegram-icon" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"/>
        </svg>
        Join Telegram
      </a>
    </div>
  </div>
  <div id="channels" class="channels-grid" aria-live="polite">
    <!-- Channels will be rendered here -->
  </div>
</div>

<script>
  let allChannels = [];
  const container = document.getElementById('channels');
  const categoryDropdown = document.getElementById('category-dropdown');
  const searchInput = document.getElementById('search-input');
  let searchTimeout;

  // Fetch JSON and initialize
  async function fetchChannels() {
    container.textContent = "Loading channels...";
    try {
      const response = await fetch("boss.json"); // <-- Replace with your actual JSON URL
      if (!response.ok) throw new Error("Network response was not ok");
      const data = await response.json();
      if (!Array.isArray(data)) throw new Error("Invalid JSON format");

      allChannels = data;
      populateCategories(allChannels);
      renderChannels();
    } catch (error) {
      container.innerHTML = "";
      const errorDiv = document.createElement("div");
      errorDiv.className = "no-results";
      errorDiv.textContent = "Failed to load channels. Please try again later.";
      container.appendChild(errorDiv);
      console.error("Error fetching channels:", error);
    }
  }

  // Populate category dropdown dynamically
  function populateCategories(channels) {
    // Clear all except 'All Categories'
    categoryDropdown.innerHTML = '<option value="all" selected>All Categories</option>';
    const uniqueGroups = [...new Set(channels.map(c => c.group))];
    uniqueGroups.sort((a, b) => a.localeCompare(b));
    uniqueGroups.forEach(group => {
      const option = document.createElement("option");
      option.value = group.toLowerCase(); // normalize for filtering
      option.textContent = group;
      categoryDropdown.appendChild(option);
    });
  }

  // Render channels based on filters
  function renderChannels() {
    container.innerHTML = "";
    const searchTerm = searchInput.value.trim().toLowerCase();
    const selectedCategory = categoryDropdown.value;

    // Filter channels by category and search term
    const filtered = allChannels.filter(channel => {
      const group = (channel.group || "").toLowerCase();
      const name = (channel.name || "").toLowerCase();

      const categoryMatch = selectedCategory === "all" || group === selectedCategory;
      const searchMatch = name.includes(searchTerm);

      return categoryMatch && searchMatch;
    });

    if (filtered.length === 0) {
      const noResultDiv = document.createElement("div");
      noResultDiv.className = "no-results";
      noResultDiv.textContent = "No channels found.";
      container.appendChild(noResultDiv);
      return;
    }

    filtered.forEach(channel => {
      const card = document.createElement("div");
      card.className = "channel-card";
      card.setAttribute("role", "button");
      card.setAttribute("tabindex", "0");
      card.setAttribute("aria-label", `View ${channel.name} channel`);
      card.onclick = () => {
        // If you want to use a play page with id param
         window.location.href = `play.html?id=${channel.id}`;
  
        // Or just open the link directly:
        //  if(channel.link){
         //   window.open(channel.link, "_blank");
         // } else {
        //    alert("No link available");
        //  }
      };
      card.onkeypress = (e) => {
        if (e.key === "Enter") card.click();
      };

      const imageContainer = document.createElement("div");
      imageContainer.className = "channel-image-container";
      const img = document.createElement("img");
      img.src = channel.logo || "fallback-logo.png";
      img.alt = channel.name + " logo";
      img.loading = "lazy";
      img.onerror = () => {
        img.src = "fallback-logo.png";
        img.alt = "Default channel logo";
      };
      imageContainer.appendChild(img);

      const details = document.createElement("div");
      details.className = "channel-details";

      const title = document.createElement("h3");
      title.title = channel.name;
      title.textContent = channel.name;

      const meta = document.createElement("div");
      meta.className = "channel-meta";
      const span = document.createElement("span");
      span.textContent = channel.group || "Unknown";
      meta.appendChild(span);

      details.appendChild(title);
      details.appendChild(meta);

      card.appendChild(imageContainer);
      card.appendChild(details);

      container.appendChild(card);
    });
  }

  // Apply filters on dropdown change or search input
  function applyFilters() {
    renderChannels();
  }

  // Debounce search input so it doesn't filter on every keypress immediately
  function debouncedFilter() {
    clearTimeout(searchTimeout);
    searchTimeout = setTimeout(() => {
      applyFilters();
    }, 300);
  }

  // Event listeners
  categoryDropdown.addEventListener("change", applyFilters);
  searchInput.addEventListener("input", debouncedFilter);

  // Initial load
  fetchChannels();
</script>
</body>
</html>
